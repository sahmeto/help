FROM hub.hamdocker.ir/node:12.22.0 AS base

WORKDIR /app

ARG NODE_OPTIONS
ARG NEXT_PUBLIC_API_URL
ARG NEXT_PUBLIC_CDN_URL
ARG NEXT_PUBLIC_WEBSITE_URL
ARG NEXT_PUBLIC_SENTRY_DSN
ARG NEXT_PUBLIC_SENTRY_ENVIRONMENT
ARG NEXT_PUBLIC_SENTRY_TRACES_SAMPLE_RATE
ARG NEXT_PUBLIC_SENTRY_SAMPLE_RATE
ARG NEXT_PUBLIC_IS_FINBEET

COPY package.json ./
COPY . ./
RUN npm install
RUN npm run build

CMD npm run start
